Title: Ephemera for Mac
Date: 2010-02-02 18:13:00
Slug: 2010-02-02-ephemera-for-mac
Tags: apple, ephemera, macruby, osx, ruby, instapaper


I've built my first Mac app: [Ephemera][1], which offers two-way
[Instapaper.com][2] sync for your ebook reader.

![Ephemera main window][3]

Here's its story, my motivation, and what it does.

* * *

### Preface

Ephemera is neither endorsed by nor affiliated with [Instapaper.com][2] or
Marco Arment. I'm just a huge fan.

### How it came to be

**A few months ago, in Oct or Nov 2009, about an hour after getting my Kindle
2 [^1] I just _knew_ that it would be the perfect device to read my news on.**

I was happy with my [Cybook gen3][5] so far, but once I got the Kindle, it
became clear that it could've been quite a bit more. The whole K2 experience
is superior in every imaginable way; the hardware feels more solid, the UI is
much better laid out and _consistent_ (a big plus), [its font][6] is lovely… I
could go on and on. And for whatever reason, I've never developed the wish to
read my news on the Cybook.

So chalk up another one for the Kindle for inspiring me.

Anyways, back then I usually caught up on my news using iPod touch/iPhone,
using the wonderful [Instapaper app][7], which (unsurprisingly) is a frontend
for the even awesomefuller [Instapaper.com][2].

(If you haven't heard of Instapaper yet, go on, check it out real quick, I'll
wait. -- Back? Cool.)

Well, how to get my Instapaper content onto my reader, then?

Application development on the Kindle was out of the question, and still is.
(Yes, I know about the upcoming SDK, but what I've read so far doesn't appeal
to me in any way; bandwidth and hardware limitations and somesuch.) The next
best thing would be a tool running on the Mac, then. Unfortunately, I knew
squat about OSX development.

Hence, I've decided to keep it simple, and wrote a little Ruby script I would
manually run whenever I wanted to sync the device. Worked well, aside from the
manual part. It's just too much work! Still, it was nice to see my Instapaper
news on my reader with its _"super-easy on the eyes"_ e-ink screen. Quite
early in the process I've added 2-way synchronization: when I would delete an
article on the device, it was automatically archived at Instapaper.com during
the next sync. Even nicer!

Still, too much manual work.

### Motivation

By end of 2009 I've decided I'd go into OSX programming for a change. I had a
clearly defined need, there wasn't a tool for it, plus I'd never built an OSX
app before -- that's enough motivation. So the first three weeks of the year I
dove into [MacRuby][8] and Cocoa, just grazing Objective-C [^2], all while
building —_drumroll!_— [Ephemera][1].

Oh yeah, my first-ever Mac app! :D And within the time limit, too -- my goal
was three weeks from start to finish ("finish" being _"have something you can
show to other people without completely embarassing yourself"_), and I've made
it. (BTW, meeting tight goals is awesome, don't underestimate the effect.)

### Enough of the inane banter, what is it?

[Ephemera][1] will comfortably synchronize your ebook reader with
Instapaper.com via USB. It works with the Amazon Kindle, Sony readers and
pretty much any device capable of reading HTML, Mobipocket or EPUB files,
which should cover quite a bit of ground.

It will fetch your news as single articles or in Instapaper's premade bundles
(Mobipocket & EPUB). Personally, I prefer the former. I can read an article,
delete it on my reader, and during the next sync it'll be archived on
Instapaper.com.

Being the lazy guy, I've also implemented a feature I call "Plug, Sync & Go":
If you want it to, [Ephemera][1] will automatically start up, sync, and then
unmount your reader when it detects the USB connection. My idea was that you'd
configure the app once, and then just have it work -- by simply connecting
your reader.

I've tried to make it as simple and comfortable as possible to get your news
onto your reader. For example, the main window has only two buttons, one of
them is for opening the preferences, and the important other one _you don't
even have to press most of the time_. So I think I've succeeded.

It's not perfect yet, of course, as there's still a lot of work to do, and I
do have a number of ideas I'd like to implement. But I mean, look: I've set up
a [support site][10] and a [Twitter account][11], so you know I mean business,
right? ;)

At the moment [Ephemera][1] runs on 10.5 and up 10.6 [^3], 64 bit Intel
only. I don't think I'll add 10.4 support, but I'm working on the 32 bit
version (MacRuby is giving me quite a bit of flak on that front).

**UPDATE 2010-02-16:** I've released v1.1 today, which runs on all Snow Leopard machines.

### Dev notes

[Ephemera][1] was made possible by [MacRuby][8]. MacRuby sits on top of
Objective-C, can be embedded & compiled, which means you can build self-
contained applications.

I've started using MacRuby v0.5b2; last weekend v0.5final was released. They
say it's not ready for production yet, but I laugh in the face of danger,
quite manly actually, because that's how I roll. ;) But yes, it's still a bit
rough around the edges (for example, as mentioned before I couldn't get the
compiled 32bit versions of the app to work, so [I've filed a ticket][13] and
hope someone will look into it).

Also, due to the lack of void pointer support there were issues with accessing
the OSX Keychain (i.e. it didn't work), so I had to work around that. I've
managed to do that; on the upside I know now how to bundle Obj-C libraries in
`.dylib` files which you can then use from MacRuby. (A seperate article on
this topic is coming up soon [has been written][14], keep an eye on [the MR
section][15] of my site if you're interested.)

That being said, if you're feeling a bit adventurous, take a look. It's quite
a remarkable and exciting project. Writing OSX apps using Ruby is fun and
enjoyable once you get the hang of it. Also, [there are brave men working on
getting MacRuby going on the iPhone.][16]

**UPDATE:** Forgot two links to good non-web resources -- you might want to
check out [Peepcode's "Meet MacRuby" screencast][17] as well as
[PragProg's "Programming Cocoa with Ruby" book][18]. The latter is a RubyCocoa
book, but the overall principles of app development apply to MacRuby as well.

### That's all, folks

Anyways, that's the story. I know it's not an app for everyone, but it's been
a while since I wrote something _I myself_ would use on a daily basis, and
that counts for something. I've showed it to a few people, and some of them
actually replied and helped me testing (thanks Mike, Norm, Bernhard & Mat).
The overall feedback was very positive, which is encouraging, to say the
least.

Yes, and I'm proud of myself. In the eternal words of Chuck Noland [^4]:
_"Look what I have created… I have made fire!"_

[Ephemera][1] for Mac.


[^1]: Insert link here to glowing Kindle 2 review I've yet to write.
[^2]: The place to be for bracket fetishists!
[^3]: Snow Leopard only at the moment, as I've ran into some finer points of
      10.5/10.6 compatibility settings in Xcode. Le _sigh_.
[^4]: From the movie "Castaway", which I've never watched. Nonetheless,
      iconic scene.

   [1]: http://goephemera.com
   [2]: http://instapaper.com
   [3]: http://dl.dropbox.com/u/7298/blog/367163850_1.png
   [4]: #fn:p367163850-1
   [5]: http://
   [6]: http://new.myfonts.com/fonts/linotype/pmn-caecilia/
   [7]: http://instapaper.com/iphone
   [8]: http://macruby.org
   [9]: #fn:p367163850-2
   [10]: http://getsatisfaction.com/municode/products/municode_ephemera
   [11]: http://twitter.com/ephemera
   [12]: #fn:p367163850-3
   [13]: http://www.macruby.org/trac/ticket/579
   [14]: http://blog.zottmann.org/post/370827421/accessing-the-keychain-with-macruby
   [15]: http://blog.zottmann.org/tagged/macruby
   [16]: http://www.mail-archive.com/macruby-devel@lists.macosforge.org/msg03368.html
   [17]: http://peepcode.com/products/meet-macruby
   [18]: http://www.pragprog.com/titles/bmrc/programming-cocoa-with-ruby
   [19]: #fn:p367163850-4
   [20]: #fnref:p367163850-1
   [21]: #fnref:p367163850-2
   [22]: #fnref:p367163850-3
   [23]: #fnref:p367163850-4
